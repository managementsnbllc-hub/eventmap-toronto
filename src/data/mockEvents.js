// Mock events for Toronto MVP — 15 events across categories
// All dates are relative to "this week" for demo purposes

const now = new Date();
const dayOfWeek = now.getDay(); // 0=Sun
const mondayOffset = dayOfWeek === 0 ? -6 : 1 - dayOfWeek;

function thisWeekDay(dayOffset, hour, minute = 0) {
  const d = new Date(now);
  d.setDate(d.getDate() + mondayOffset + dayOffset);
  d.setHours(hour, minute, 0, 0);
  return d.toISOString();
}

export const MOCK_EVENTS = [
  {
    id: '1',
    title: 'Jazz Night at The Rex',
    description: 'Live jazz trio performing classics and originals. No cover before 9pm. Full dinner and cocktail menu available.',
    category: 'music',
    event_mode: 'in_person',
    venue_name: 'The Rex Hotel Jazz & Blues Bar',
    address_text: '194 Queen St W, Toronto',
    latitude: 43.6510,
    longitude: -79.3882,
    starts_at: thisWeekDay(3, 20, 0),  // Thursday 8pm
    ends_at: thisWeekDay(3, 23, 30),
    cover_image_url: null,
    price_text: 'Free before 9pm',
    save_count: 42,
    share_count: 18,
    avg_rating: 4.5,
    rating_count: 23,
    creator_name: 'TorontoJazzScene',
    is_recurring: true,
    rrule: 'FREQ=WEEKLY;BYDAY=TH',
  },
  {
    id: '2',
    title: 'Saturday Farmers Market',
    description: 'Fresh produce, artisan bread, local honey, and handmade goods from Ontario farmers. Rain or shine under the covered pavilion.',
    category: 'food',
    event_mode: 'in_person',
    venue_name: 'Evergreen Brick Works',
    address_text: '550 Bayview Ave, Toronto',
    latitude: 43.6846,
    longitude: -79.3650,
    starts_at: thisWeekDay(5, 8, 0),   // Saturday 8am
    ends_at: thisWeekDay(5, 13, 0),
    cover_image_url: null,
    price_text: 'Free entry',
    save_count: 156,
    share_count: 89,
    avg_rating: 4.8,
    rating_count: 67,
    creator_name: 'EBW_Markets',
    is_recurring: true,
    rrule: 'FREQ=WEEKLY;BYDAY=SA',
  },
  {
    id: '3',
    title: 'Pickup Basketball — Trinity Bellwoods',
    description: 'Friendly pickup games every Wednesday evening. All skill levels welcome. Bring your own water. Courts are first come first served.',
    category: 'sports',
    event_mode: 'in_person',
    venue_name: 'Trinity Bellwoods Park',
    address_text: '790 Queen St W, Toronto',
    latitude: 43.6468,
    longitude: -79.4138,
    starts_at: thisWeekDay(2, 18, 0),  // Wednesday 6pm
    ends_at: thisWeekDay(2, 20, 0),
    cover_image_url: null,
    price_text: 'Free',
    save_count: 31,
    share_count: 12,
    avg_rating: 4.2,
    rating_count: 14,
    creator_name: 'HoopsTO',
    is_recurring: true,
    rrule: 'FREQ=WEEKLY;BYDAY=WE',
  },
  {
    id: '4',
    title: 'AGO First Thursday — Free Admission',
    description: 'Free admission to the Art Gallery of Ontario every first Thursday. Explore the permanent collection and current exhibitions.',
    category: 'art',
    event_mode: 'in_person',
    venue_name: 'Art Gallery of Ontario',
    address_text: '317 Dundas St W, Toronto',
    latitude: 43.6536,
    longitude: -79.3925,
    starts_at: thisWeekDay(3, 18, 0),  // Thursday 6pm
    ends_at: thisWeekDay(3, 21, 0),
    cover_image_url: null,
    price_text: 'Free',
    save_count: 210,
    share_count: 145,
    avg_rating: 4.7,
    rating_count: 89,
    creator_name: 'AGO_Toronto',
    is_recurring: false,
    rrule: null,
  },
  {
    id: '5',
    title: 'Tech Meetup: AI & Startups',
    description: 'Monthly meetup for founders, engineers, and AI enthusiasts. Lightning talks followed by networking. Pizza and drinks provided.',
    category: 'tech',
    event_mode: 'hybrid',
    venue_name: 'MaRS Discovery District',
    address_text: '101 College St, Toronto',
    latitude: 43.6598,
    longitude: -79.3907,
    starts_at: thisWeekDay(1, 18, 30),  // Tuesday 6:30pm
    ends_at: thisWeekDay(1, 21, 0),
    cover_image_url: null,
    online_link: 'https://meet.example.com/ai-startups',
    online_platform: 'meet',
    price_text: 'Free',
    save_count: 74,
    share_count: 38,
    avg_rating: 4.3,
    rating_count: 19,
    creator_name: 'TOTechScene',
    is_recurring: false,
    rrule: null,
  },
  {
    id: '6',
    title: 'Kensington Night Market',
    description: 'Street food vendors, live music, art installations, and local craft booths. The neighbourhood comes alive after dark.',
    category: 'food',
    event_mode: 'in_person',
    venue_name: 'Kensington Market',
    address_text: 'Kensington Ave, Toronto',
    latitude: 43.6545,
    longitude: -79.4005,
    starts_at: thisWeekDay(4, 19, 0),  // Friday 7pm
    ends_at: thisWeekDay(4, 23, 0),
    cover_image_url: null,
    price_text: 'Free entry',
    save_count: 189,
    share_count: 102,
    avg_rating: 4.6,
    rating_count: 55,
    creator_name: 'KensingtonBIA',
    is_recurring: false,
    rrule: null,
  },
  {
    id: '7',
    title: 'Morning Yoga in High Park',
    description: 'Outdoor vinyasa flow for all levels. Bring your own mat. We meet at the hill near the Colborne Lodge entrance. Cancelled if raining.',
    category: 'wellness',
    event_mode: 'in_person',
    venue_name: 'High Park',
    address_text: '1873 Bloor St W, Toronto',
    latitude: 43.6465,
    longitude: -79.4637,
    starts_at: thisWeekDay(5, 7, 30),  // Saturday 7:30am
    ends_at: thisWeekDay(5, 8, 30),
    cover_image_url: null,
    price_text: '$10 drop-in',
    save_count: 63,
    share_count: 27,
    avg_rating: 4.9,
    rating_count: 31,
    creator_name: 'FlowYogaTO',
    is_recurring: true,
    rrule: 'FREQ=WEEKLY;BYDAY=SA',
  },
  {
    id: '8',
    title: 'Distillery District Live Music',
    description: 'Emerging Toronto bands perform on the outdoor stage. Grab a drink from one of the patios and enjoy.',
    category: 'music',
    event_mode: 'in_person',
    venue_name: 'Distillery District',
    address_text: '55 Mill St, Toronto',
    latitude: 43.6503,
    longitude: -79.3596,
    starts_at: thisWeekDay(5, 14, 0),  // Saturday 2pm
    ends_at: thisWeekDay(5, 18, 0),
    cover_image_url: null,
    price_text: 'Free',
    save_count: 95,
    share_count: 48,
    avg_rating: 4.4,
    rating_count: 36,
    creator_name: 'DistilleryEvents',
    is_recurring: false,
    rrule: null,
  },
  {
    id: '9',
    title: 'Sunday Community Cleanup',
    description: 'Join neighbours for a 2-hour cleanup along the waterfront. Gloves and bags provided. Coffee and muffins after.',
    category: 'community',
    event_mode: 'in_person',
    venue_name: 'Sugar Beach',
    address_text: '11 Dockside Dr, Toronto',
    latitude: 43.6431,
    longitude: -79.3627,
    starts_at: thisWeekDay(6, 9, 0),   // Sunday 9am
    ends_at: thisWeekDay(6, 11, 0),
    cover_image_url: null,
    price_text: 'Free',
    save_count: 28,
    share_count: 15,
    avg_rating: 4.8,
    rating_count: 11,
    creator_name: 'CleanTO',
    is_recurring: true,
    rrule: 'FREQ=WEEKLY;BYDAY=SU',
  },
  {
    id: '10',
    title: 'Friday Night Comedy at Second City',
    description: 'Improv and sketch comedy from Toronto\'s best. Two-drink minimum. Shows sell out — arrive early for best seats.',
    category: 'nightlife',
    event_mode: 'in_person',
    venue_name: 'Second City Toronto',
    address_text: '51 Mercer St, Toronto',
    latitude: 43.6445,
    longitude: -79.3955,
    starts_at: thisWeekDay(4, 20, 0),  // Friday 8pm
    ends_at: thisWeekDay(4, 22, 0),
    cover_image_url: null,
    price_text: '$25',
    save_count: 118,
    share_count: 61,
    avg_rating: 4.6,
    rating_count: 48,
    creator_name: 'SecondCityTO',
    is_recurring: true,
    rrule: 'FREQ=WEEKLY;BYDAY=FR',
  },
  {
    id: '11',
    title: 'Virtual Book Club: Canadian Fiction',
    description: 'This month we\'re reading "Fight Night" by Miriam Toews. Join the Zoom discussion from anywhere. New members welcome.',
    category: 'community',
    event_mode: 'online',
    venue_name: null,
    address_text: null,
    latitude: null,
    longitude: null,
    starts_at: thisWeekDay(2, 19, 0),  // Wednesday 7pm
    ends_at: thisWeekDay(2, 20, 30),
    cover_image_url: null,
    online_link: 'https://zoom.example.com/bookclub',
    online_platform: 'zoom',
    online_instructions: 'Passcode: READS2025',
    price_text: 'Free',
    save_count: 22,
    share_count: 9,
    avg_rating: 4.1,
    rating_count: 8,
    creator_name: 'TOReadsClub',
    is_recurring: true,
    rrule: 'FREQ=MONTHLY;BYDAY=1WE',
  },
  {
    id: '12',
    title: 'Rooftop DJ Set — Lavelle',
    description: 'Sunset views and deep house on the rooftop. Dress code smart casual. Reservations recommended.',
    category: 'nightlife',
    event_mode: 'in_person',
    venue_name: 'Lavelle',
    address_text: '627 King St W, Toronto',
    latitude: 43.6440,
    longitude: -79.4020,
    starts_at: thisWeekDay(5, 17, 0),  // Saturday 5pm
    ends_at: thisWeekDay(5, 23, 59),
    cover_image_url: null,
    price_text: '$20 cover',
    save_count: 87,
    share_count: 53,
    avg_rating: 4.3,
    rating_count: 29,
    creator_name: 'LavelleTO',
    is_recurring: false,
    rrule: null,
  },
  {
    id: '13',
    title: 'Online Coding Workshop: React Native',
    description: 'Hands-on workshop building a simple mobile app. Suitable for beginners who know basic JavaScript. Laptop required.',
    category: 'tech',
    event_mode: 'online',
    venue_name: null,
    address_text: null,
    latitude: null,
    longitude: null,
    starts_at: thisWeekDay(3, 12, 0),  // Thursday noon
    ends_at: thisWeekDay(3, 14, 0),
    cover_image_url: null,
    online_link: 'https://twitch.example.com/codingworkshop',
    online_platform: 'twitch',
    price_text: 'Free',
    save_count: 45,
    share_count: 21,
    avg_rating: 4.0,
    rating_count: 12,
    creator_name: 'LearnCodeTO',
    is_recurring: false,
    rrule: null,
  },
  {
    id: '14',
    title: 'St. Lawrence Market Weekend Tour',
    description: 'Guided food tour through Toronto\'s oldest market. Taste artisan cheeses, peameal bacon sandwiches, and more. 2 hours.',
    category: 'food',
    event_mode: 'in_person',
    venue_name: 'St. Lawrence Market',
    address_text: '93 Front St E, Toronto',
    latitude: 43.6487,
    longitude: -79.3714,
    starts_at: thisWeekDay(5, 10, 0),  // Saturday 10am
    ends_at: thisWeekDay(5, 12, 0),
    cover_image_url: null,
    price_text: '$45/person',
    save_count: 52,
    share_count: 33,
    avg_rating: 4.7,
    rating_count: 21,
    creator_name: 'TasteToronto',
    is_recurring: true,
    rrule: 'FREQ=WEEKLY;BYDAY=SA',
  },
  {
    id: '15',
    title: 'Harbourfront Sunset Run Club',
    description: '5K and 10K groups along the waterfront trail. Pace groups for everyone. Post-run stretching and socializing at Amsterdam Brewhouse.',
    category: 'sports',
    event_mode: 'in_person',
    venue_name: 'Harbourfront Centre',
    address_text: '235 Queens Quay W, Toronto',
    latitude: 43.6387,
    longitude: -79.3820,
    starts_at: thisWeekDay(1, 18, 0),  // Tuesday 6pm
    ends_at: thisWeekDay(1, 19, 30),
    cover_image_url: null,
    price_text: 'Free',
    save_count: 38,
    share_count: 16,
    avg_rating: 4.5,
    rating_count: 17,
    creator_name: 'RunTO',
    is_recurring: true,
    rrule: 'FREQ=WEEKLY;BYDAY=TU,TH',
  },
];

// Helper to get distance text (mock — will be real GPS later)
export function getDistanceText(event) {
  if (!event.latitude) return 'Online';
  // Fake distances from downtown core for now
  const distances = {
    '1': '0.5 km', '2': '3.2 km', '3': '1.8 km', '4': '0.7 km',
    '5': '0.9 km', '6': '0.8 km', '7': '6.1 km', '8': '2.4 km',
    '9': '2.6 km', '10': '1.2 km', '11': null, '12': '1.4 km',
    '13': null, '14': '1.9 km', '15': '2.0 km',
  };
  return distances[event.id] || '—';
}

// Helper to format event time for cards
export function formatEventTime(isoString) {
  const d = new Date(isoString);
  const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
  const day = days[d.getDay()];
  const hours = d.getHours();
  const mins = d.getMinutes();
  const ampm = hours >= 12 ? 'PM' : 'AM';
  const h = hours % 12 || 12;
  const m = mins > 0 ? `:${mins.toString().padStart(2, '0')}` : '';
  return `${day} ${h}${m} ${ampm}`;
}

export function formatTimeRange(startIso, endIso) {
  return `${formatEventTime(startIso)} – ${formatEventTime(endIso).split(' ').slice(1).join(' ')}`;
}
